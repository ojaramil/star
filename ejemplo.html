<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>STAR ¬∑ Interpretaci√≥n de Lenguaje No Verbal</title>
<style>
  :root{
    --bg:#e3f2fd; --card:#ffffff; --text:#0d1624; --brand:#0d47a1; --muted:#5a6a7a;
    --border:#c5cae9; --ok:#1565c0; --no:#c62828; --radius:14px;
  }
  *{box-sizing:border-box}
  body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;background:var(--bg);color:var(--text)}
  .app{max-width:960px;margin:auto;padding:20px}
  .header{background:linear-gradient(90deg,var(--brand),#1976d2);color:#fff;padding:18px;border-radius:12px;text-align:center;box-shadow:0 4px 12px rgba(13,71,161,.25)}
  .small{font-size:13px;opacity:.9}
  .card{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);padding:16px;box-shadow:0 6px 18px rgba(0,0,0,.06);margin:16px 0}
  .row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
  .btn{width:100%;padding:14px;border-radius:12px;border:2px solid var(--border);background:#e8eaf6;cursor:pointer;text-align:left;font-size:16px;transition:all .2s}
  .btn:hover{background:#c5cae9;transform:translateY(-1px)}
  .btn.secondary{width:auto;background:#fff}
  .pill{background:#e3f2fd;border:1px solid var(--border);padding:4px 10px;border-radius:999px;font-weight:600}
  .kpi{color:var(--muted);display:flex;gap:14px;flex-wrap:wrap}
  .progress{height:10px;background:#d1d8f0;border-radius:999px;overflow:hidden}
  .fill{height:100%;width:0;background:linear-gradient(90deg,var(--brand),#42a5f5)}
  .feedback{font-weight:700;margin-top:10px;font-size:15px}
  .ok{color:var(--ok)}
  .no{color:var(--no)}
  .footer{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
  .tag{padding:6px 10px;border:1px solid var(--border);border-radius:999px;background:#fff;cursor:pointer;transition:all .2s}
  .tag.active{border-color:var(--brand);background:#e3f2fd;font-weight:600}
  .tags{display:flex;gap:8px;flex-wrap:wrap}
  .hint{font-size:13px;color:var(--muted);margin-bottom:6px}
  h2{margin:0 0 8px;font-size:20px;color:var(--brand)}
  .habilidad-tag{background:var(--brand);color:#fff;padding:6px 12px;border-radius:999px;font-size:12px;font-weight:600}
  @media (min-width:720px){
    .opts{display:grid;grid-template-columns:1fr 1fr;gap:10px}
  }
</style>
</head>
<body>
<div class="app">
  <div class="header">
    <h1>STAR Platform</h1>
    <div class="habilidad-tag">Interpretaci√≥n de Lenguaje No Verbal</div>
    <div class="small">100 situaciones binarias ‚Ä¢ Sem√°foro de dificultad ‚Ä¢ Refuerzo positivo inmediato</div>
  </div>

  <div class="card" id="info">
    <div class="row" style="justify-content:space-between;align-items:center">
      <div class="kpi">
        <span class="pill" id="counter">1 / 100</span>
        <span class="pill" id="scoreKpi">Puntos: 0</span>
        <span class="pill" id="accKpi">Aciertos: 0%</span>
      </div>
      <div style="min-width:220px;flex:1">
        <div class="progress"><div id="bar" class="fill"></div></div>
      </div>
    </div>
  </div>

  <div class="card" id="screen"></div>

  <div class="card">
    <div class="footer">
      <button class="btn secondary" id="prev">‚Üê Anterior</button>
      <button class="btn secondary" id="next">Siguiente ‚Üí</button>
      <button class="btn secondary" id="shuffle">üîÄ Mezclar</button>
      <button class="btn secondary" id="reset">üîÑ Reiniciar</button>
    </div>
    <div class="hint" style="margin-top:10px">üí° Consejo: Observa detenidamente las se√±ales no verbales y elige la respuesta que mejor las interprete.</div>
  </div>
</div>

<script>
const SITUACIONES = [
  // 1-10 Mirada y contacto visual
  {q:"Tu compa√±ero mira el reloj mientras hablas.", good:"Noto que tal vez tiene prisa y acorto mi historia.", bad:"Sigo hablando sin detenerme."},
  {q:"La persona cruza los brazos y frunce el ce√±o.", good:"Parece molesta, mejor pregunto si algo le inquieta.", bad:"Ignoro su expresi√≥n y sigo como si nada."},
  {q:"Tu amigo no te mira a los ojos al saludar.", good:"Entiendo que algunas personas prefieren evitar el contacto visual.", bad:"Insisto en que me mire mientras hablo."},
  {q:"Alguien se aparta un paso al acercarte.", good:"Noto que necesita m√°s espacio personal, me detengo.", bad:"Me acerco m√°s porque no lo noto."},
  {q:"El profesor levanta una ceja mientras explicas.", good:"Tal vez hay algo confuso, mejor pregunto si entendi√≥.", bad:"Contin√∫o sin verificar si hay dudas."},
  {q:"Tu jefe asiente r√°pido y mira la puerta.", good:"Detecta que necesita irse, resumo r√°pido.", bad:"Sigo dando detalles largos."},
  {q:"Un compa√±ero sonr√≠e pero su mirada est√° triste.", good:"Intuyo que no se siente bien, pregunto c√≥mo est√°.", bad:"Asumo que est√° feliz y no pregunto m√°s."},
  {q:"Alguien se toca la nuca y suspira.", good:"Parece estresado, ofrezco ayuda.", bad:"No le doy importancia y sigo con mi tema."},
  {q:"Tu amigo se inclina hacia adelante con los ojos brillantes.", good:"Est√° interesado, contin√∫o con entusiasmo.", bad:"Cambio de tema pensando que se aburre."},
  {q:"La persona se quita las gafas y las limpia.", good:"Tal vez necesita tiempo para pensar, hago una pausa.", bad:"Sigo hablando sin pausar."},

  // 11-20 Gestos y postura
  {q:"Tu compa√±ero te da la mano floja al saludar.", good:"Noto que es una persona m√°s reservada, respeto su forma.", bad:"Le aprieto la mano con fuerza por costumbre."},
  {q:"Alguien se da la vuelta mientras hablas.", good:"Entiendo que quiere terminar la conversaci√≥n, me despido.", bad:"Me coloco frente a √©l para seguir hablando."},
  {q:"Tu amigo se muerde el labio mirando el suelo.", good:"Parece nervioso, hablo con voz calmada.", bad:"Le pregunto por qu√© no me mira fijamente."},
  {q:"Un compa√±ero gesticula mucho con las manos.", good:"Sus gestos refuerzan su mensaje, los observo.", bad:"Me distraigo y solo miro las manos."},
  {q:"El profesor se inclina hacia ti cuando habla.", good:"Quiso enfatizar algo importante, presto atenci√≥n.", bad:"Me incomodo y me alejo."},
  {q:"Alguien se toca la barbilla pensativo.", good:"Est√° reflexionando, espero a que termine de pensar.", bad:"Interrumpo con otra pregunta."},
  {q:"Tu jefe te se√±ala con el dedo √≠ndice.", good:"Me est√° llamando la atenci√≥n directamente, escucho.", bad:"Siento que me acusa y me defiendo."},
  {q:"Un amigo se da golpecitos en la pierna.", good:"Parece ansioso, pregunto si quiere cambiar de actividad.", bad:"No le presto atenci√≥n al malestar."},
  {q:"La persona se encoge de hombros sin hablar.", good:"No sabe la respuesta, acepto la incertidumbre.", bad:"Insisto en que me d√© una respuesta clara."},
  {q:"Tu compa√±ero se acerca mucho al hablar.", good:"Respetuosamente inclino el torso hacia atr√°s.", bad:"Me quedo quieto sin marcar mi espacio."},

  // 21-30 Expresiones faciales
  {q:"Alguien frunce el ce√±o leyendo un mensaje.", good:"Parece confundido, pregunto si necesita aclaraci√≥n.", bad:"Asumo que est√° molesto conmigo."},
  {q:"Tu amigo sonr√≠e con los ojos cerrados.", good:"Sonrisa genuina, respondo con igual energ√≠a.", bad:"Pienso que se burla y me encierro."},
  {q:"La persona muestra los dientes pero tensa la mand√≠bula.", good:"Sonrisa forzada, investigo qu√© pasa.", bad:"Creo que es una sonrisa normal."},
  {q:"Un compa√±ero abre mucho los ojos sorprendido.", good:"Est√° asombrado, pregunto qu√© le llam√≥ la atenci√≥n.", bad:"Me asusto tambi√©n sin saber por qu√©."},
  {q:"Tu profesor tiene ce√±o fruncido leyendo tu trabajo.", good:"Puede haber un error, pregunto si est√° todo bien.", bad:"Asumo que reprobar√© y me angustio."},
  {q:"Alguien sonr√≠e con una ceja levantada.", good:"Expresa curiosidad, explico m√°s del tema.", bad:"Pienso que est√° siendo ir√≥nico."},
  {q:"Tu amigo tiene cara de cansancio profundo.", good:"Noto que est√° agotado, le ofrezco ayuda o pausa.", bad:"Le pido que me ayude igual."},
  {q:"Una persona se sonroja al hablar.", good:"Puede estar avergonzada, suavizo el tono.", bad:"Se√±alo su rubor y la averg√ºenzo m√°s."},
  {q:"Tu jefe aprieta los labios en l√≠nea recta.", good:"Est√° serio o insatisfecho, pregunto qu√© necesita.", bad:"Asumo que est√° enojado y me defiendo."},
  {q:"Alguien abre la boca sin hablar, sorprendido.", good:"Espero a que se recupere del shock.", bad:"Le presiono para que responda r√°pido."},

  // 31-40 Proxemia y distancia
  {q:"Alguien se aleja al acercarte a saludar.", good:"Respeto su espacio personal y saludo desde lejos.", bad:"Me acerco m√°s para saludar igual."},
  {q:"Tu amigo se sienta muy cerca en el sof√°.", good:"Si me incomoda, lo menciono con tacto.", bad:"Me quedo inc√≥modo sin decir nada."},
  {q:"Un compa√±ero bloquea la puerta charlando.", good:"Le indico amablemente que necesito pasar.", bad:"Espero pacientemente sin decir nada."},
  {q:"La persona habla a solo 10 cm de tu cara.", good:"Retrocedo suavemente sin ofender.", bad:"Me quedo quieto sin aire."},
  {q:"Alguien se sienta al otro lado de la sala.", good:"Entiendo que necesita distancia, respeto.", bad:"Me siento junto a √©l invadiendo su espacio."},
  {q:"Tu compa√±ero gira la silla para no mirarte.", good:"Noto que necesita privacidad, no lo molesto.", bad:"Giro la silla para que me mire."},
  {q:"Un grupo se cierra en c√≠rculo sin incluirte.", good:"Espero a que se abra o me acerco con respeto.", bad:"Me abro paso sin miramientos."},
  {q:"Alguien se para detr√°s de ti mientras trabajas.", good:"Pregunto si necesita algo, ofrezco ayuda.", bad:"Me incomodo y me enfado."},
  {q:"Tu amigo se agacha para hablar contigo sentado.", good:"Agradezco el gesto, mantengo contacto visual.", bad:"Me siento intimidado por la altura."},
  {q:"Un cliente se inclina sobre el mostrador.", good:"Me acerco para escuchar mejor sin invadir.", bad:"Me alejo pensando que es agresivo."},

  // 41-50 Paralenguaje (tono, ritmo)
  {q:"Alguien habla muy r√°pido y nervioso.", good:"Calmo con voz pausada y escucho.", bad:"Le pido que hable m√°s r√°pido para terminar."},
  {q:"Tu jefe habla en tono seco y cortante.", good:"Es su estilo, no lo tomo personal.", bad:"Asumo que est√° molesta conmigo."},
  {q:"Un amigo habla muy bajito y t√≠mido.", good:"Me acerco para escuchar sin presionar.", bad:"Le digo que hable m√°s fuerte."},
  {q:"La persona suelta una risa nerviosa tras hablar.", good:"Intuyo inseguridad, le animo.", bad:"Creo que se burla y me molesto."},
  {q:"Alguien habla con voz temblorosa.", good:"Parece nervioso, le doy tiempo.", bad:"Le interrumpo por no entender."},
  {q:"Tu compa√±ero grita de emoci√≥n.", good:"Comparto su entusiasmo.", bad:"Pienso que est√° gritando enojo."},
  {q:"Una persona habla pausada y profunda.", good:"Presto atenci√≥n, es importante para ella.", bad:"Me aburro y cambio de tema."},
  {q:"Alguien usa tono cantar√≠n al explicar.", good:"Es su forma expresiva, la escucho.", bad:"Le pido que hable normal."},
  {q:"Tu profesor habla quedo al final de clase.", good:"Me acerco para escuchar mejor.", bad:"Abandono sin escuchar instrucciones."},
  {q:"Un amigo responde con monos√≠labos cortos.", good:"Parece distante, pregunto si est√° bien.", bad:"Sigo hablando sin notar su desinter√©s."},

  // 51-60 Se√±ales de fin de conversaci√≥n
  {q:"Alguien mira el reloj y da pasos hacia la puerta.", good:"Entiendo que se debe ir, termino r√°pido.", bad:"Sigo extendiendo la conversaci√≥n."},
  {q:"Tu compa√±ero dice 'bueno...' y hace silencio.", good:"Es una despedida, me despido tambi√©n.", bad:"Lleno el silencio con m√°s temas."},
  {q:"La persona guarda sus cosas lentamente.", good:"Est√° prepar√°ndose para irse, termino.", bad:"Le pregunto otra cosa."},
  {q:"Alguien deja de responder y asiente solo.", good:"Noto que ya no conversa, doy por terminado.", bad:"Sigo hablando solamente."},
  {q:"Tu amigo deja de hacer contacto visual.", good:"Est√° desconectando, me despido.", bad:"Le exijo que me mire."},
  {q:"Un compa√±ero dice 'ya veo...' en tono final.", good:"Es una se√±al de cierre, agradezco y termino.", bad:"Empiezo a explicar de nuevo."},
  {q:"La persona se levanta de la silla.", good:"Se est√° yendo, digo adi√≥s.", bad:"Le pido que se siente otra vez."},
  {q:"Alguien dice 'hablamos luego' pero no especifica.", good:"Acepto y espero a que me contacte.", bad:"Le pregunto cu√°ndo exactamente ahora."},
  {q:"Tu jefe cierra el port√°til bruscamente.", good:"Termin√≥ la reuni√≥n, me retiro.", bad:"Pregunto si quiere ver algo m√°s."},
  {q:"Un amigo pasa la mirada por encima de tu hombro.", good:"Busca a otra persona, termino la charla.", bad:"Le pido atenci√≥n exclusiva."},

  // 61-70 Se√±ales de inter√©s vs aburrimiento
  {q:"Alguien se inclina hacia ti mientras hablas.", good:"Est√° interesado, contin√∫o con detalles.", bad:"Pienso que invade espacio y me alejo."},
  {q:"Tu compa√±ero bosteza sin taparse la boca.", good:"Parece cansado, acorto la explicaci√≥n.", bad:"Me ofendo y le pregunto si se aburre."},
  {q:"La persona hace preguntas r√°pidas.", good:"Noto inter√©s, profundizo en el tema.", bad:"Me agobio y corto la conversaci√≥n."},
  {q:"Alguien juega con el m√≥vil mientras hablas.", good:"Noto desinter√©s, pregunto si prefiere otro momento.", bad:"Sigo hablando m√°s fuerte para llamar atenci√≥n."},
  {q:"Tu amigo mantiene contacto visual constante.", good:"Est√° atento, contin√∫o con confianza.", bad:"Me incomodo y rompo el contacto."},
  {q:"Un compa√±ero repite lo que dices.", good:"Est√° procesando, confirmo que entendi√≥ bien.", bad:"Me impaciento y le interrumpo."},
  {q:"La persona se anima al hablar de un tema.", good:"Noto pasi√≥n, lo animo a continuar.", bad:"Cambio de tema abruptamente."},
  {q:"Alguien mira a todos menos a ti en grupo.", good:"Intuyo exclusi√≥n, me uno con cautela o pregunto.", bad:"Me retiro ofendido sin intentar."},
  {q:"Tu jefe toma notas mientras hablas.", good:"Es importante, hablo despacio y claro.", bad:"Me incomodo y hablo m√°s r√°pido."},
  {q:"Un amigo responde con 'uy', 'vaya' repetido.", good:"Est√° conectado, contin√∫o.", bad:"Pienso que no escucha y me callo."},

  // 71-80 Se√±ales de emociones complejas
  {q:"Alguien tiene l√°grimas pero sonr√≠e.", good:"Parece una emoci√≥n mixta, pregunto si est√° bien.", bad:"Asumo que es feliz y no pregunto."},
  {q:"Tu compa√±ero se r√≠e en un momento serio.", good:"Puede estar nervioso, no lo tomo a mal.", bad:"Le rega√±o por ser irrespetuoso."},
  {q:"La persona se pone roja y calla.", good:"Parece avergonzada, suavizo el ambiente.", bad:"Le pido que hable m√°s fuerte."},
  {q:"Alguien tiene cara de p√°nico pero dice 'estoy bien'.", good:"Sus palabras y cara no coinciden, ofrezco apoyo.", bad:"Creo que est√° bien y no insisto."},
  {q:"Tu amigo se frota las manos r√°pidamente.", good:"Muestra ansiedad, le doy tiempo.", bad:"Le pido que est√© quieto."},
  {q:"Un compa√±ero respira profundo y cierra los ojos.", good:"Esta controlando emoci√≥n, le doy espacio.", bad:"Le pregunto qu√© le pasa repetidas veces."},
  {q:"La persona sonr√≠e forzadamente al recibir cr√≠ticas.", good:"Noto incomodidad, suavizo el tono.", bad:"Contin√∫o con la cr√≠tica pensando que le gusta."},
  {q:"Alguien mueve la cabeza con tristeza.", good:"Intuyo tristeza, pregunto si quiere hablar.", bad:"Ignoro la se√±al y sigo con mi d√≠a."},
  {q:"Tu jefe frunce ce√±o pero dice 'buen intento'.", good:"Hay contradicci√≥n, pregunto qu√© mejorar.", bad:"Asumo que felicita y no pregunto m√°s."},
  {q:"Un amigo cierra los pu√±os al hablar.", good:"Parece frustrado, le pregunto qu√© le molesta.", bad:"Pienso que quiere pelear y me alejo."},

  // 81-90 Se√±ales culturales/situacionales
  {q:"Alguien hace silencio en un ascensor.", good:"Respeto la norma de espacio cerrado, callo.", bad:"Sigo hablando alto como si nada."},
  {q:"La profesora pone el dedo en los labios.", good:"Se√±al de silencio, guardo el m√≥vil.", bad:"Sigo charlando con mi compa√±ero."},
  {q:"Un desconocido asiente en la calle.", good:"Es un saludo cort√©s, devuelvo el gesto.", bad:"Ignoro el gesto porque no lo conozco."},
  {q:"Tu compa√±ero te gui√±a un ojo.", good:"Puede ser una broma, sonr√≠o sin sobreinterpretar.", bad:"Pienso que se burla y me enojo."},
  {q:"Alguien se quita el gorro al entrar.", good:"Sigo el gesto de respeto, lo saludo formal.", bad:"No noto el gesto y sigo con mi actividad."},
  {q:"Un amigo chasquea los dedos se√±alando algo.", good:"Miro a donde se√±ala sin sentirme ordenado.", bad:"Me molesto por el chasquido."},
  {q:"La persona se pone de pie en una reuni√≥n.", good:"Se√±al de que quiere hablar, le cedo turno.", bad:"Yo tambi√©n me levanto para hablar."},
  {q:"Alguien te se√±ala con la barbilla.", good:"Es una forma de se√±alar, miro a donde indica.", bad:"Me ofendo por no usar el dedo."},
  {q:"Tu compa√±ero te pasa la mano por el cuello.", good:"Parece cansado, le pregunto si descans√≥.", bad:"Pienso que es una se√±al de agresi√≥n."},
  {q:"Un desconocido te sonr√≠e en el bus.", good:"Devuelvo una sonrisa cort√©s breve.", bad:"Miro fijamente sin sonre√≠r."},

  // 91-100 Se√±ales de ayuda/silencio
  {q:"Alguien te mira fijamente sin hablar.", good:"Parece necesitar algo, pregunto si puedo ayudar.", bad:"Me incomodo y evito su mirada."},
  {q:"Tu amigo se queda callado tras una pregunta.", good:"Necesita tiempo para responder, espero.", bad:"Repito la pregunta m√°s fuerte."},
  {q:"Un compa√±ero te sigue a todas partes sin hablar.", good:"Intuyo que quiere compa√±√≠a, le incluyo en la actividad.", bad:"Le pido que deje de seguirme."},
  {q:"Alguien se esconde la cara con las manos.", good:"Est√° abrumado, le doy espacio o apoyo silencioso.", bad:"Le quito las manos de la cara."},
  {q:"Tu jefe te mira por encima de las gafas.", good:"Es una mirada evaluadora, espero instrucciones.", bad:"Me siento juzgado y me justifico."},
  {q:"Un amigo mira tu camisa y luego tu cara.", good:"Puede haber algo en mi camisa, reviso discretamente.", bad:"Le pregunto qu√© le pasa con mi camisa."},
  {q:"Alguien se se√±ala el pecho y luego a ti.", good:"Es un gesto de inclusi√≥n, asiento.", bad:"No entiendo el gesto y lo ignoro."},
  {q:"Tu compa√±ero se rasca la cabeza confundido.", good:"No entendi√≥, repaso la informaci√≥n.", bad:"Sigo adelante sin verificar."},
  {q:"Un desconocido te ofrece su asiento.", good:"Es un gesto amable, agradezco y acepto si lo necesito.", bad:"Lo rechazo sin mirarlo."},
  {q:"Alguien cierra los ojos al escucharte.", good:"Est√° concentrado, contin√∫o claramente.", bad:"Pienso que no me escucha y me enojo."}
];

// ===== SISTEMA BASE (NO TOCAR) =====
let order = [...Array(SITUACIONES.length).keys()];
let idx = 0;
let puntos = 0;
let intentos = 0;
const dificultad = {};

function shuffle(a){ for(let i=a.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j],a[i]]; } return a; }
function setProgress(i, total){
  document.getElementById("counter").textContent = (i+1) + " / " + total;
  const acc = intentos ? Math.round((puntos/intentos)*100) : 0;
  document.getElementById("scoreKpi").textContent = "Puntos: " + puntos;
  document.getElementById("accKpi").textContent = "Aciertos: " + acc + "%";
  document.getElementById("bar").style.width = ((i+1)/total*100) + "%";
}

function render(){
  const pos = order[idx];
  const item = SITUACIONES[pos];
  if (!item) return;
  
  const options = Math.random() > 0.5
    ? [{t:item.good, ok:true},{t:item.bad, ok:false}]
    : [{t:item.bad, ok:false},{t:item.good, ok:true}];

  const difSel = dificultad[pos] || null;

  const html = `
    <div class="row" style="justify-content:space-between;align-items:flex-start">
      <div style="flex:1">
        <h2>Situaci√≥n</h2>
        <p>${item.q}</p>
      </div>
      <div class="pill">Caso #${idx+1}</div>
    </div>

    <div class="opts">
      <button class="btn" data-ok="${options[0].ok?'1':'0'}">${options[0].t}</button>
      <button class="btn" data-ok="${options[1].ok?'1':'0'}">${options[1].t}</button>
    </div>

    <div id="fb" class="feedback"></div>

    <div style="margin-top:12px">
      <div class="hint">Clasifica la dificultad percibida (opcional):</div>
      <div class="tags">
        <span class="tag ${difSel==='verde'?'active':''}" data-dif="verde">üü¢ Verde (f√°cil)</span>
        <span class="tag ${difSel==='amarillo'?'active':''}" data-dif="amarillo">üü° Amarillo (requiere ayuda)</span>
        <span class="tag ${difSel==='rojo'?'active':''}" data-dif="rojo">üî¥ Rojo (dif√≠cil)</span>
      </div>
    </div>
  `;
  document.getElementById("screen").innerHTML = html;

  document.querySelectorAll("#screen .btn").forEach(b=>{
    b.addEventListener("click", ()=>{
      intentos++;
      const ok = b.getAttribute("data-ok") === "1";
      const fb = document.getElementById("fb");
      if(ok){
        puntos++;
        fb.textContent = "¬°Correcto! Has identificado la respuesta adaptativa.";
        fb.className = "feedback ok";
        setTimeout(()=>{ next(); }, 500);
      } else {
        fb.textContent = "Reflexiona de nuevo: busca la opci√≥n flexible y planificada.";
        fb.className = "feedback no";
      }
      setProgress(idx, SITUACIONES.length);
    });
  });

  document.querySelectorAll("#screen .tag").forEach(t=>{
    t.addEventListener("click", ()=>{
      document.querySelectorAll("#screen .tag").forEach(x=>x.classList.remove("active"));
      t.classList.add("active");
      dificultad[pos] = t.getAttribute("data-dif");
    });
  });

  setProgress(idx, SITUACIONES.length);
}

function next(){ idx = (idx+1) % SITUACIONES.length; render(); }
function prev(){ idx = (idx-1+SITUACIONES.length) % SITUACIONES.length; render(); }
function reshuffle(){ order = shuffle(order); idx = 0; puntos = 0; intentos = 0; for(const k in dificultad) delete dificultad[k]; render(); }
function resetAll(){ idx=0; puntos=0; intentos=0; order=[...Array(SITUACIONES.length).keys()]; for(const k in dificultad) delete dificultad[k]; render(); }

document.getElementById("next").addEventListener("click", next);
document.getElementById("prev").addEventListener("click", prev);
document.getElementById("shuffle").addEventListener("click", reshuffle);
document.getElementById("reset").addEventListener("click", resetAll);

if(SITUACIONES.length < 100) alert("‚ö†Ô∏è ADVERTENCIA: A√∫n no has agregado las 100 situaciones completas");
reshuffle();
</script>
</body>
</html>